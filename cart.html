<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Cart</title>
  <link rel="stylesheet" href="cart.css">
</head>
<body>

<header class="app-header">
  <h2>My Cart</h2>
</header>

<div id="cartItems"></div>




<section class="bill-summary">
  <h3>Bill summary</h3>

  <div class="bill-row">
    <span>
      Cart value
    </span>
    <span>
      <s></s> ₹<span id="basketValue">58</span>
    </span>
  </div>

  <div class="bill-row">
  <span>Delivery Charge</span>
  <span id="deliveryText">₹15</span>
</div>

<p class="free-note" id="deliveryNote">
  Add items worth ₹150 more to get free delivery
</p>

  <div class="bill-row">
    <span>Get my order in a bag</span>
    <span class="free">FREE</span>
  </div>

  <div class="bill-row">
    <span>Handling & Other Charges ›</span>
    <span>₹21</span>
  </div>
  <hr>

  <div class="bill-total">
    <span>
      To pay<br>
      <small>Inclusive of all Taxes and Charges</small>
    </span>
    <strong>₹<span id="payable">36</span></strong>
  </div>
</section>


<!-- Bottom Checkout Bar -->
<div class="checkout-bar">

  <!-- LEFT SIDE -->
  <div class="payment-method" onclick="togglePaymentOptions()">
    <span class="change">CHANGE METHOD ▶</span>
    <div class="method">
      <span id="selectedMethod">Pay on delivery</span>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <button class="place-order-btn">
    <div class="btn-text">
      <span class="btn-label">Place order</span>
      <span class="btn-price">₹36</span>
    </div>
    <svg class="arrow-right" viewBox="0 0 24 24">
      <path d="M8,4l8,8l-8,8v-16Z"/>
    </svg>
  </button>

</div>

<!-- PAYMENT OPTIONS -->
<div class="payment-options" id="paymentOptions">
  <div class="option" onclick="selectMethod('Cash on Delivery')">Cash on Delivery</div>
  <div class="option" onclick="selectMethod('Online Payment')">Online Payment</div>
  <div class="option" onclick="selectMethod('Pay Later')">Pay Later</div>
</div>

<script>
function togglePaymentOptions() {
  const options = document.getElementById("paymentOptions");
  options.style.display = options.style.display === "block" ? "none" : "block";
}

function selectMethod(method) {
  document.getElementById("selectedMethod").innerText = method;
  document.getElementById("paymentOptions").style.display = "none";
}
</script>
<script>
localStorage.removeItem("cart");
</script>

<script>
function updateQty(id, change) {
  let cart = JSON.parse(localStorage.getItem("cart")) || {};

  cart[id].qty += change;

  if (cart[id].qty <= 0) {
    delete cart[id];
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  location.reload();
}

function removeItem(id) {
  let cart = JSON.parse(localStorage.getItem("cart")) || {};
  delete cart[id];
  localStorage.setItem("cart", JSON.stringify(cart));
  location.reload();
}
</script>
<script>
const cartItemsDiv = document.getElementById("cartItems");
let cart = JSON.parse(localStorage.getItem("cart")) || {};
let total = 0;

cartItemsDiv.innerHTML = "";

// EMPTY CART MESSAGE
if (Object.keys(cart).length === 0) {
  cartItemsDiv.innerHTML = "<p>Your cart is empty</p>";
  document.getElementById("payable").innerText = "0";
}

// LOAD CART ITEMS
Object.values(cart).forEach(item => {
  total += item.price * item.qty;

  const div = document.createElement("div");
  div.className = "cart-item";

  div.innerHTML = `
    <img src="${item.image}">
    <div class="info">
      <h4>${item.name}</h4>
      <p>₹${item.price}</p>
      <div class="qty">
        <button onclick="updateQty('${item.id}', -1)">−</button>
        <span>${item.qty}</span>
        <button onclick="updateQty('${item.id}', 1)">+</button>
      </div>
    </div>
    <button class="remove" onclick="removeItem('${item.id}')">✕</button>
  `;

  cartItemsDiv.appendChild(div);
});

document.getElementById("payable").innerText = total.toFixed(2);
</script>

<script>
function removeItem(id) {
  let cart = JSON.parse(localStorage.getItem("cart")) || {};
  delete cart[id];
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function renderCart() {
  const cartItemsDiv = document.getElementById("cartItems");
  cartItemsDiv.innerHTML = "";
  let total = 0;

  Object.values(JSON.parse(localStorage.getItem("cart")) || {}).forEach(item => {
    total += item.price * item.qty;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <img src="${item.image}">
      <div class="info">
        <h4>${item.name}</h4>
        <p>₹${item.price}</p>
        <div class="qty">
          <button onclick="updateQty('${item.id}', -1)">−</button>
          <span>${item.qty}</span>
          <button onclick="updateQty('${item.id}', 1)">+</button>
        </div>
      </div>
      <button class="remove" onclick="removeItem('${item.id}')">✕</button>
    `;
    cartItemsDiv.appendChild(div);
  });

  document.getElementById("payable").innerText = total.toFixed(2);
}
<button class="remove" onclick="removeItem('${item.id}')">✕</button>

// auto load cart
renderCart();
</script>
<script>
function removeItem(id) {
  let cart = JSON.parse(localStorage.getItem("cart")) || {};

  // remove product
  delete cart[id];

  // save updated cart
  localStorage.setItem("cart", JSON.stringify(cart));

  // refresh cart UI
  location.reload();
}
</script>


<script src="cart.js"></script>
</body>
</html>
